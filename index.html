<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Neon Chat Pro</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&family=Orbitron:wght@700&display=swap" rel="stylesheet">

    <style>
        :root { --primary: #007bff; --bg: #f0f2f5; --online: #2ed573; --danger: #ff4757; }
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body { background: var(--bg); font-family: 'Poppins', sans-serif; margin: 0; height: 100vh; overflow: hidden; display: flex; flex-direction: column; }

        /* AUTH & PROFILE SCREENS */
        .overlay-screen { position: fixed; inset: 0; background: white; z-index: 500; display: flex; align-items: center; justify-content: center; padding: 20px; text-align: center; }
        .card { background: white; width: 100%; max-width: 380px; padding: 30px; border-radius: 25px; box-shadow: 0 15px 35px rgba(0,0,0,0.1); }
        .logo { font-family: 'Orbitron'; color: var(--primary); font-size: 2.2rem; margin-bottom: 5px; }
        input { width: 100%; padding: 14px; margin: 10px 0; border-radius: 12px; border: 1px solid #ddd; background: #f8f9fa; outline: none; font-size: 1rem; }
        .btn-main { width: 100%; padding: 15px; border-radius: 12px; border: none; background: var(--primary); color: white; font-weight: bold; cursor: pointer; transition: 0.2s; }
        
        .dp-circle { width: 110px; height: 110px; border-radius: 50%; border: 3px solid var(--primary); margin: 0 auto 15px; overflow: hidden; cursor: pointer; }
        .dp-img { width: 100%; height: 100%; object-fit: cover; }

        /* APP MAIN UI */
        header { background: white; padding: 12px 20px; display: flex; align-items: center; justify-content: space-between; border-bottom: 1px solid #eee; z-index: 100; }
        .nav-profile { display: flex; align-items: center; gap: 10px; }
        .status-dot { width: 10px; height: 10px; background: var(--online); border-radius: 50%; border: 2px solid white; display: inline-block; }

        /* CHAT AREA */
        #chatBox { flex: 1; overflow-y: auto; padding: 20px; display: flex; flex-direction: column; gap: 12px; background: #f0f2f5; }
        .msg { max-width: 75%; padding: 12px 16px; border-radius: 20px; font-size: 0.95rem; position: relative; animation: slideIn 0.2s ease; }
        .msg-me { align-self: flex-end; background: var(--primary); color: white; border-bottom-right-radius: 4px; }
        .msg-them { align-self: flex-start; background: white; color: #333; border-bottom-left-radius: 4px; box-shadow: 0 2px 8px rgba(0,0,0,0.05); }
        .msg-img { width: 100%; border-radius: 12px; margin-top: 5px; display: block; }

        /* ACTION BUTTONS */
        .msg-action { font-size: 0.65rem; font-weight: bold; color: var(--danger); cursor: pointer; margin-top: 4px; text-transform: uppercase; opacity: 0.7; }
        
        /* INPUT AREA */
        .input-bar { background: white; padding: 12px 20px; display: flex; align-items: center; gap: 12px; border-top: 1px solid #eee; margin-bottom: 60px; }
        .add-media { font-size: 1.6rem; cursor: pointer; color: #666; }
        #msgIn { flex: 1; padding: 12px 18px; border-radius: 25px; border: 1px solid #ddd; background: #f1f3f5; outline: none; }

        @keyframes slideIn { from{opacity:0; transform:translateY(10px);} to{opacity:1; transform:translateY(0);} }
        .hidden { display: none !important; }

        /* AD BOX */
        #ad-container { position: fixed; bottom: 0; left: 0; width: 100%; height: 60px; background: #fff; z-index: 1000; display: flex; justify-content: center; align-items: center; border-top: 1px solid #eee; }
    </style>
</head>
<body>

    <div id="authScreen" class="overlay-screen">
        <div class="card">
            <div class="logo">NEON CHAT</div>
            <p>Private Messenger & Photos</p>
            <input type="text" id="userIn" placeholder="Username (Unique Name)">
            <input type="password" id="passIn" placeholder="Secret Key (Password)">
            <button class="btn-main" onclick="goToProfile()">ENTER NEON WORLD</button>
        </div>
    </div>

    <div id="profileScreen" class="overlay-screen hidden">
        <div class="card">
            <h2 style="font-family:'Orbitron';">SETUP PROFILE</h2>
            <div class="dp-circle" onclick="document.getElementById('dpInput').click()">
                <img src="https://api.dicebear.com/7.x/bottts/svg?seed=initial" id="dpView" class="dp-img">
            </div>
            <input type="file" id="dpInput" hidden accept="image/*" onchange="previewDP(this)">
            <input type="text" id="bioIn" placeholder="Write your Neon Bio...">
            <button class="btn-main" onclick="startApp()">SAVE & CHAT</button>
        </div>
    </div>

    <div id="mainApp" class="hidden" style="display:flex; flex-direction:column; height:100vh;">
        <header>
            <div class="logo" style="font-size:1.2rem;">NEON PRO</div>
            <input type="text" id="findPartner" placeholder="Search person..." onchange="connectChat()" style="width:140px; margin:0; padding:8px; font-size:0.8rem;">
            <div class="nav-profile">
                <span id="myNameDisp" style="font-size:0.75rem; font-weight:bold;"></span>
                <img src="" id="topDp" style="width:35px; height:35px; border-radius:50%; border:2px solid var(--primary);">
            </div>
        </header>

        <div id="chatBox">
            </div>

        <div class="input-bar">
            <span class="add-media" onclick="document.getElementById('imgIn').click()">üñºÔ∏è</span>
            <input type="file" id="imgIn" hidden accept="image/*" onchange="uploadPhoto(this)">
            <input type="text" id="msgIn" placeholder="Type a message...">
            <button class="btn-main" style="width:50px; padding:10px;" onclick="sendText()">‚û§</button>
        </div>
    </div>

    <div id="ad-container">
        <script type="text/javascript">
            atOptions = { 'key' : '697d465f55b34630746380bf6791eb54', 'format' : 'iframe', 'height' : 50, 'width' : 320, 'params' : {} };
        </script>
        <script type="text/javascript" src="https://www.highperformanceformat.com/697d465f55b34630746380bf6791eb54/invoke.js"></script>
    </div>

    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-database-compat.js"></script>

    <script>
        // ‚úÖ PURANA CONFIG
        const firebaseConfig = {
            apiKey: "AIzaSyANEPedAQAd9VYnMMdw42Bjw_tQkBxxn2M",
            authDomain: "neon-game-hub.firebaseapp.com",
            databaseURL: "https://neon-game-hub-default-rtdb.firebaseio.com",
            projectId: "neon-game-hub",
            storageBucket: "neon-game-hub.firebasestorage.app",
            messagingSenderId: "636141968933",
            appId: "1:636141968933:web:60c7cc21d75883ef08a9cc"
        };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();

        let myName = "", myDp = "", partner = "";

        // LOGIN LOGIC
        function goToProfile() {
            myName = document.getElementById('userIn').value.trim();
            if(!myName) return alert("Enter Username!");
            document.getElementById('authScreen').classList.add('hidden');
            document.getElementById('profileScreen').classList.remove('hidden');
        }

        function previewDP(input) {
            const reader = new FileReader();
            reader.onload = e => {
                document.getElementById('dpView').src = e.target.result;
                myDp = e.target.result;
            };
            reader.readAsDataURL(input.files[0]);
        }

        function startApp() {
            document.getElementById('profileScreen').classList.add('hidden');
            document.getElementById('mainApp').classList.remove('hidden');
            document.getElementById('topDp').src = myDp || "https://api.dicebear.com/7.x/bottts/svg?seed="+myName;
            document.getElementById('myNameDisp').innerText = "@" + myName;
            
            // Set Online Status
            db.ref('presence/' + myName).set("online");
            db.ref('presence/' + myName).onDisconnect().remove();
        }

        // CHAT SYNC
        function connectChat() {
            partner = document.getElementById('findPartner').value.trim();
            if(!partner || partner === myName) return;
            const chatId = [myName, partner].sort().join("_");
            db.ref('chats/' + chatId).on('value', snap => renderChat(snap.val()));
        }

        function sendText() {
            const txt = document.getElementById('msgIn').value.trim();
            if(!txt || !partner) return;
            pushMsg({ from: myName, type: 'text', val: txt });
            document.getElementById('msgIn').value = "";
        }

        function uploadPhoto(input) {
            const reader = new FileReader();
            reader.onload = e => pushMsg({ from: myName, type: 'img', val: e.target.result });
            reader.readAsDataURL(input.files[0]);
        }

        function pushMsg(data) {
            const chatId = [myName, partner].sort().join("_");
            db.ref('chats/' + chatId).push(data);
        }

        function renderChat(data) {
            const box = document.getElementById('chatBox');
            box.innerHTML = "";
            if(!data) return;
            Object.values(data).forEach(m => {
                const div = document.createElement('div');
                div.className = `msg ${m.from === myName ? 'msg-me' : 'msg-them'}`;
                
                if(m.type === 'text') div.innerText = m.val;
                else div.innerHTML = `<img src="${m.val}" class="msg-img">`;
                
                // Add Report Option
                const report = document.createElement('div');
                report.className = "msg-action";
                report.innerText = "REPORT";
                report.onclick = () => alert("User Reported Successfully!");
                div.appendChild(report);

                box.appendChild(div);
            });
            box.scrollTop = box.scrollHeight;
        }

        document.getElementById('msgIn').addEventListener("keypress", e => { if(e.key === "Enter") sendText(); });
    </script>
</body>
</html>
